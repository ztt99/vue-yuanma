{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/array.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/utils/next-tick.js","../../src/observe/schedular.js","../../src/observe/watcher.js","../../src/state.js","../../src/compile/parse-html.js","../../src/compile/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["export function isObject(data){\r\n    return typeof data === 'object' && data !== null\r\n}\r\n\r\nexport function proxy(vm,source,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[source][key]\r\n        },\r\n        set(val){\r\n            vm[source][key] = val\r\n        }\r\n    })\r\n}\r\nconst API_HOOkS = [\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted',\r\n    'beforeUpdate',\r\n    'updated'\r\n]\r\nlet starts = {}\r\n\r\nAPI_HOOkS.forEach(hook=>{\r\n    starts[hook] = mergeHook\r\n})\r\nfunction mergeHook(parent,child){\r\n    if(child){\r\n        if(parent){\r\n            return parent.concat(child)\r\n        }else{\r\n            return [child]\r\n        }\r\n    }else{\r\n        return parent\r\n    }\r\n}\r\nexport  function mergeOptions(parent,child){\r\n    let options = {}\r\n    for(let key in parent){\r\n        mergefile(key)\r\n    } \r\n    for(let key in child){\r\n        if(!parent.hasOwnProperty(key)){\r\n            mergefile(key)\r\n        }\r\n    }\r\n    function mergefile(key){\r\n        if(starts[key]){\r\n            options[key]  = starts[key](parent[key],child[key])\r\n             return options[key]\r\n\r\n        }\r\n        if(typeof parent[key] == 'object' && typeof child[key] === 'object'){\r\n            options[key] = {...parent[key],...child[key]} //如果是引用类型，则合并\r\n        }else if(!child[key]){ //如果子类型没有则用父类型\r\n            options[key] = parent[key]\r\n        }else{\r\n            options[key] = child[key] \r\n        }\r\n    }\r\n\r\n    return options\r\n}","let  oldArrayMethods = Array.prototype\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\n//列举出会使数据变化的方法\r\nconst methods = ['push','pop','shift','unshift','splice','reverce','sort']\r\n\r\nmethods.forEach(name=>{\r\n    arrayMethods[name] = function(...args){\r\n       const result =  oldArrayMethods[name].apply(this,args)\r\n\r\n       let inserted,ob = this.__ob__\r\n       switch (name) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args\r\n               break; \r\n            case 'splice':\r\n                inserted = args.slice(2)\r\n       }\r\n       console.log('push',this);\r\n       ob.dep.notify() //数组push的时候不会触发get那里的notify\r\n       ob.observeArray(inserted)\r\n       return result\r\n    }\r\n})\r\n\r\n\r\n\r\n","let id = 0\r\nclass Dep{\r\n    constructor(){\r\n        this.id = id++\r\n        this.subs = []\r\n    }\r\n    addSub(watcher){\r\n        // 因为在addDep是去重了，所以这里不会重复添加watcher ，有几个需要观测的就有几个watcher\r\n        this.subs.push(watcher)\r\n    }\r\n    depend(){\r\n        // 让watcher记住当前的dep\r\n        // this.subs.push(Dep.target)\r\n        // 保存在watcher实例上一个dep\r\n        Dep.target.addDep(this)\r\n    }\r\n    notify(){\r\n        // 阶段一：只是有数据的更改，没有computed等，此时每个sub中只有一个watcher\r\n        this.subs.forEach(watcher=>{\r\n            watcher.update(); //修改完数据，触发updated\r\n            if(watcher.isWatcher){\r\n                watcher.cb()   //触发updated 生命周期\r\n            }\r\n        })\r\n    }\r\n}\r\nconst stack = []\r\n// 在初始化时 new Watcher的时候调用，然后执行getters函数，触发get函数\r\nexport function pushTarget(watcher){\r\n    Dep.target = watcher\r\n    stack.push(watcher)\r\n}\r\n\r\nexport function popTarget(){\r\n    stack.pop()\r\n    Dep.target = stack[stack.length - 1]\r\n}\r\n\r\nexport default Dep\r\n","import {isObject} from '../utils/index.js'\r\nimport { arrayMethods} from './array.js'\r\nimport Dep from './dep.js'\r\n//Object.defineProperty  不能兼容ie8 及以下 vue2 无法兼容ie8版本\r\n\r\nclass Observe{\r\n    constructor(data){\r\n        this.dep = new Dep\r\n\r\n        Object.defineProperty(data,'__ob__',{\r\n            enumerable:false,\r\n            configurable:false,\r\n            value :this\r\n        })\r\n        if(Array.isArray(data)){\r\n            data.__proto__ = arrayMethods\r\n            this.observeArray(data)\r\n        }else{\r\n            this.walk(data)  //监听对象\r\n        }\r\n    }\r\n    walk(data){\r\n        let keys = Object.keys(data)\r\n        for(let i = 0 , len = keys.length; i< len; i++){\r\n            let key = keys[i]\r\n            let value = data[key]\r\n            defineReactive(data,key,value)\r\n        }\r\n    }\r\n    observeArray(data){\r\n        for(let i = 0, len = data.length;i<len;i++){\r\n            observe(data[i])\r\n        }\r\n    }\r\n}\r\n\r\n//defineReactive只监听对象\r\nfunction defineReactive(data,key,value){\r\n    let dep = new Dep()\r\n    //[1,2,3] [1,2,3] [1,2,3]\r\n    let childOb = observe(value)\r\n\r\n    Object.defineProperty(data,key,{\r\n        configurable:true,\r\n        enumerable:true,\r\n        get(){\r\n            if(Dep.target){\r\n                //已经触发 pushTarget 并且Dep.target = Watcher的实例\r\n                dep.depend()  //存watcher  如果是对象或者是数组会depend两次，  childOb.dep.depend()   dep.depend()\r\n                if(childOb){ //数组的依赖收集  这样this中就会得到收集watcher的notify\r\n                    childOb.dep.depend() \r\n                    // 如果数组中还有数组 \r\n                    if(Array.isArray(value)){\r\n                        dependArray(value)\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        set(newValue){\r\n            if(newValue === value) return \r\n            observe(newValue)  //用户设置的值可能是一个对象\r\n            value = newValue\r\n            dep.notify() //更新watcher 如果是数组push等不会触发set方法  notify只是为了更新dom\r\n        }\r\n    })\r\n}\r\n\r\n// 数组中的数组的依赖收集\r\nfunction dependArray(val){\r\n    for(let i = 0 ; i < val.length ; i++){\r\n        let current = val[i]\r\n        current.__ob__&&current.__ob__.dep.depend()\r\n        if(Array.isArray(current)){\r\n            dependArray(current)\r\n        }  \r\n    }\r\n}\r\nexport function observe(data){\r\n    if(!isObject(data)) return \r\n    return new Observe(data)\r\n}\r\n","\r\nlet callbacks = []\r\nlet waiting = false\r\n\r\nfunction flushCallback(){\r\n    while(callbacks.length){\r\n        let cb = callbacks.pop()\r\n        cb()\r\n    }\r\n    waiting = false\r\n\r\n}\r\nlet timerFunc;\r\n\r\nif(Promise){\r\n    timerFunc = ()=>{\r\n        Promise.resolve().then(flushCallback)\r\n    }\r\n}else if(MutationObserver){\r\n    // 监听dom变化 ，如果dom变化执行flushCallback\r\n    let observe = new MutationObserver(flushCallback)\r\n    let textNode = document.createTextNode(1)\r\n    observe.observe(textNode,{characterData:true})\r\n    timerFunc = ()=>{\r\n        textNode.textContent = 2\r\n    }\r\n}else if(setImmediate){\r\n    timerFunc = ()=>{\r\n        setImmediate(flushCallback)\r\n    }\r\n}else{\r\n    setTimeout(flushCallback)\r\n}\r\nexport function nextTick(cb){\r\n    // 只要没有添加完就继续添加\r\n    callbacks.push(cb)\r\n    if(!waiting){\r\n        waiting = true\r\n        // 已经放到宏任务中了，等到callbacks  push完毕后才会执行cb\r\n        // setTimeout会最后执行 这样最后只有一个setTimeout \r\n        timerFunc()\r\n    }\r\n    \r\n}","//调度的功能\r\n\r\nimport {nextTick } from '../utils/next-tick'\r\nlet queue = []\r\nlet has = { }\r\n\r\nfunction flushSchedularQueue(){\r\n    queue.forEach(watcher=>watcher.run()) \r\n    queue = []\r\n    has = { }\r\n}\r\n/**\r\n * 假设存在属性name，如果多次给name赋值，就会多次触发set，就会多次触发notify 就会触发watcher的update 就会触发geteers\r\n * 就会渲染dom，也就是说修改了相同的属性，但是还是多次触发没有意义\r\n */\r\nexport function queueWatcher(watcher){\r\n    let id = watcher.id  //现在只new 了一个watcher 所以id都是0\r\n    if(has[id]== null){\r\n        has[id] = true\r\n        queue.push(watcher)\r\n        // vue.nextTick = promise / mutationObserver / setImmediate / setTimeout  优雅降级\r\n        // 将更新dom放到宏任务中，同步代码执行完毕，再执行宏任务\r\n        nextTick(flushSchedularQueue)\r\n    }\r\n     \r\n}","import { pushTarget, popTarget } from './dep'\r\nimport { queueWatcher } from './schedular.js'\r\nlet id = 0\r\nclass Watcher {\r\n    constructor(vm, exportFn, cb, options = {}) {\r\n        this.vm = vm\r\n        this.cb = cb\r\n        this.options = options\r\n        this.isWatcher = typeof options === 'object' ? false : options //是渲染watcher\r\n        this.id = id++\r\n        this.lazy = options.lazy\r\n        this.dirty = options.lazy\r\n        this.user = options.user  //用户 watch\r\n        this.depsid = new Set()\r\n        this.deps = []\r\n        if (typeof exportFn == 'function') {\r\n            this.getter = exportFn\r\n        } else {\r\n            // getter 返回当前值\r\n            this.getter = function () {\r\n                let val = exportFn.split('.')\r\n                return val.reduce((p, c) => {\r\n                    return p[c]\r\n                }, vm)\r\n            }\r\n\r\n        }\r\n        // 默认先调用一次get  取值将结果保留下来\r\n        if (!this.lazy) {\r\n            this.value = this.get()\r\n        }\r\n    }\r\n    addDep(dep) {\r\n        // watcher里不能放重复的dep dep中不能放重复的watcher\r\n        // 进行去重操作，可能重复触发get \r\n        let id = dep.id\r\n        if (!this.depsid.has(id)) {\r\n            this.depsid.add(id)\r\n            this.deps.push(this)\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n    get() {\r\n        pushTarget(this) //添加watcher\r\n        let redult = this.getter.call(this.vm) //渲染watcher执行,调用render\r\n        popTarget()\r\n        return redult\r\n    }\r\n    update() {\r\n        if (this.lazy) {\r\n            this.dirty = true\r\n        } else {\r\n            // 每次get都会调用watcher中的get\r\n            // this.get()\r\n            queueWatcher(this)\r\n        }\r\n\r\n    }\r\n    run() {\r\n        this.newValue = this.get()\r\n        this.oldValue = this.value\r\n        if (this.user) {\r\n            this.cb.call(this.vm, this.newValue, this.oldValue)\r\n        }\r\n    }\r\n    evaluate() {\r\n        this.value = this.get()\r\n        this.dirty = false\r\n    }\r\n}\r\n\r\n\r\nexport default Watcher","import {observe}  from './observe/index'\r\nimport {proxy} from './utils/index.js'\r\nimport Watcher from './observe/watcher.js'\r\nexport function initState(vm){\r\n    const opts = vm.$options\r\n    if(opts.props){\r\n        initProps(vm)\r\n    }\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n    if(opts.computed){\r\n        // 原理也是get ，会缓存，内部有变量 dirty\r\n        // 也是一个watcher\r\n        initComputed(vm)\r\n    }\r\n    if(opts.methods){\r\n        initMethods(vm)\r\n    }\r\n    if(opts.watch){\r\n        initWatch(vm)\r\n    }\r\n}\r\n\r\nfunction initProps(vm){}\r\n\r\nfunction initData(vm){\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n    for(let key in data){\r\n        proxy(vm,'_data',key)\r\n    }\r\n    observe(data)\r\n}\r\nfunction initComputed(vm){\r\n    let computed = vm.$options.computed\r\n    const watchers = vm._computedWatchers = {}\r\n\r\n    // 1. 需要有watcher\r\n    // 2. 需要通过defineProperty\r\n    // 3. 需要一个变量\r\n    for(let key in computed){\r\n        const userDep = computed[key]\r\n        const getter = typeof userDep === 'function'? userDep:userDep.get\r\n        watchers[key] = new Watcher(vm,getter,()=>{},{lazy:true})\r\n        defineCpmputed(vm,key,userDep)\r\n    }\r\n\r\n}\r\n\r\nconst sharedPropertyDefinition = {\r\n    enumerable:true,\r\n    configurable:true,\r\n    get:()=>{},\r\n    set:()=>{}\r\n}\r\nfunction defineCpmputed(target,key ,userDep){\r\n    if(typeof userDep === 'function'){\r\n        // 需要重写get ， 进行缓存\r\n        sharedPropertyDefinition.get = createComputedGetter(key)\r\n    }else{\r\n        sharedPropertyDefinition.get =createComputedGetter(key) \r\n        sharedPropertyDefinition.set = userDep.set\r\n    }\r\n    Object.defineProperty(target,key,sharedPropertyDefinition)\r\n}\r\nfunction createComputedGetter(key){\r\n    return function(){\r\n         //如果是脏的就执行\r\n        const watcher = this._computedWatchers[key]\r\n        if(watcher){\r\n            if(watcher.dirty){ //如果是脏的就求值\r\n               watcher.evaluate()\r\n            }\r\n            return watcher.value\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nfunction initMethods(vm){\r\n    let methods = vm.$options.methods\r\n    Object.keys(methods).forEach(method=>method.bind(vm))\r\n}\r\nfunction initWatch(vm){\r\n    let watch =  vm.$options.watch\r\n    for(let key in watch){\r\n        let handlers = watch[key]\r\n        if(Array.isArray(handlers)){\r\n            handlers.forEach(handler=>{ ///watch 的值是数组\r\n                createWatcher(vm,key,handler)\r\n            })\r\n        }else{\r\n            createWatcher(vm,key,handlers) //watch 的值是函数，字符串，对象\r\n        }\r\n    }\r\n}\r\n\r\nfunction createWatcher(vm,exprOrFn,handler,options){\r\n    if(typeof handler == 'object'){\r\n        options = handler\r\n        handler = handler.handler\r\n    }\r\n    if(typeof handler == 'string'){ //使用的是methods上的方法\r\n        handler = vm[handler]\r\n    }\r\n    /**\r\n     * exprOrFn 监听的属性\r\n     * handler 监听的方法\r\n     * options 监听的配置\r\n     * \r\n     */\r\n    return vm.$watch(exprOrFn,handler,options)\r\n}\r\n\r\nexport function stateMixin(Vue){\r\n    Vue.prototype.$watch = function (exprOrFn,cb,options={}){\r\n        new Watcher(this,exprOrFn,cb,{...options,user:true})\r\n        if(options.immediate){\r\n            cb()\r\n        }\r\n    }\r\n}\r\n","\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\nconst startTagClose = /^\\s*(\\/?)>/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\n\r\nlet root = null\r\nlet currentParen\r\nlet stack = []\r\nconst ELEMENT_TYPE = 1\r\nconst TEXT_TYPE = 3\r\n\r\nfunction createAstElement(tagName,attrs){\r\n    return {\r\n        tag:tagName,\r\n        type:ELEMENT_TYPE,\r\n        parent:null,\r\n        children:[],\r\n        attrs\r\n    }\r\n}\r\nfunction start(tagName,attrs){\r\n   let ele =  createAstElement(tagName,attrs)\r\n   if(!root) {\r\n    root = ele\r\n   }\r\n   currentParen = ele\r\n   stack.push(ele)\r\n}\r\nfunction chars(text){\r\n    text =  text.replace(/\\s/g,'')\r\n    if(text){\r\n        currentParen.children.push({\r\n            text,\r\n            type:TEXT_TYPE\r\n        })\r\n    }\r\n}\r\n\r\nfunction end(tagName){\r\n let ele =  stack.pop()\r\n currentParen  = stack[stack.length - 1]\r\n\r\n if(currentParen){\r\n    ele.parent = currentParen\r\n    currentParen.children.push(ele)\r\n }\r\n\r\n}\r\nexport  function paeseHTML(html) {\r\n    while (html) {\r\n        const textEnd = html.indexOf('<')\r\n        if (textEnd === 0) {  //如果等于0那么是开始标签\r\n            const startTagMatch = parseStartTag()\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName,startTagMatch.attrs)\r\n                continue\r\n            }\r\n            let endTagMatch = html.match(endTag)\r\n            if (endTagMatch) {\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1])\r\n                continue\r\n            }\r\n        }\r\n        let text\r\n        if (textEnd >= 0) {\r\n            text = html.substring(0, textEnd)\r\n        }\r\n        if (text) {\r\n            chars(text)\r\n            advance(text.length)\r\n        }\r\n\r\n        \r\n\r\n    }\r\n\r\n    return root\r\n\r\n\r\n    function advance(n) {\r\n        html = html.substring(n)\r\n    }\r\n\r\n    function parseStartTag() {\r\n        let start = html.match(startTagOpen)\r\n        const parse = {\r\n            tagName: start && start[1],\r\n            attrs: []\r\n        }\r\n        advance(start && start[0].length)  //删除已经放到parse中的字符串\r\n        let attrs, end;\r\n        while ((attrs = html.match(attribute)) && !(end = html.match(startTagClose))) {\r\n            let obj = {\r\n                name: attrs[1],\r\n                value : attrs[3]\r\n            }\r\n            parse.attrs.push(obj)\r\n            advance(attrs[0].length)\r\n        }\r\n        if (end = html.match(startTagClose)) {\r\n            advance(end[0].length)\r\n            return parse\r\n        }\r\n        return null\r\n\r\n    }\r\n}","\r\nimport { paeseHTML } from './parse-html.js'\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nexport function compileToFunctoin(template) {\r\n    let root = paeseHTML(template)\r\n    //将AST语法树生成render函数\r\n    // <div id='app'><p>hello {{name}}</p>hello</div>\r\n    //_c('div',{id:\"app\"},_c('p',undefined,_v(\"hello\" + _s(name)),_v('hello')))\r\n    return function render() {\r\n        let code =  generate(root)\r\n        let renderFn = new Function(`with(this){ return ${code}}`)\r\n        return renderFn\r\n    }\r\n}\r\n\r\nfunction generate(el) {\r\n    let code = `_c('${el.tag}',\r\n     ${el.attrs.length ? geneProps(el.attrs) : 'undefined'},\r\n     ${genChildren(el) ? genChildren(el) : ''})\r\n     `\r\n\r\n    return code\r\n}\r\nfunction genChildren(el) {\r\n\r\n    let children = el.children\r\n    if (children && children.length) {\r\n        return children.map(c => gen(c)).join(',')\r\n        // for(let i = 0 ; i < children.length;i++){\r\n        //     children[i].type == 1 ? text += generate(children[i])+',' : text += `_v(${children[i].text})`+ ','\r\n        // }\r\n    } else {\r\n        return false\r\n    }\r\n}\r\nfunction gen(node) {\r\n    if (node.type == 1) {\r\n        return generate(node)\r\n    } else {\r\n        let text = node.text\r\n        let tokens = []\r\n        let match, index;\r\n        let lastIndex = defaultTagRE.lastIndex = 0\r\n        while (match = defaultTagRE.exec(text)) {\r\n            index = match.index\r\n            if(lastIndex < index){\r\n                tokens.push(JSON.stringify( text.slice(lastIndex,index)))\r\n            }\r\n            // asas{{as}}asas{{as}}\r\n            tokens.push(`_s(${match[1]})`)\r\n            lastIndex = index +match[0].length\r\n        }\r\n        if(lastIndex < text.length){\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n\r\n        return `_v(${tokens.join('+')})`\r\n    }\r\n}\r\nfunction geneProps(attrs) {\r\n    let str = ''\r\n    attrs.forEach(item => {\r\n        if (item.name === 'style') {\r\n            let obj = {}\r\n            const [key, value] = item.value.split(':')\r\n            obj[key] = value\r\n            item.value = obj\r\n        }\r\n        str += `${item.name}:${JSON.stringify(item.value)},`\r\n    })\r\n    return `{${str.slice(0, -1)}}`\r\n}\r\n\r\n\r\n\r\n\r\n","export function patch(oldVnode, vnode) {\r\n// 第一次不进行对比，初始化的时候将真实dom渲染成虚拟dom\r\n    const isRealElement = oldVnode.nodeType\r\n    if (isRealElement===1) {\r\n        const oldElm = oldVnode\r\n        const parentElm = oldElm.parentNode  //body\r\n        let el = createElm(vnode)\r\n        parentElm.insertBefore(el, oldVnode.nextSibling) //把新的节点放到原来节点的后面\r\n        oldElm.remove()\r\n        console.log(vnode.el);\r\n        return el\r\n\r\n    }else{\r\n        // 更新时 用老的虚拟节点与新的进行对比，将不同的地方更新真实的dom\r\n\r\n        // 如果tag不同，那么直接替换\r\n        if(oldVnode.tag !== vnode.tag){\r\n         return  oldVnode.el.parentNode.replaceChild(createElm(vnode),oldVnode.el)\r\n        }\r\n        // 如果标签一样 tag都是undefined\r\n        if(!oldVnode.tag){\r\n         if(oldVnode.text !== vnode.text){ \r\n            return oldVnode.el.textContent = vnode.text\r\n         }\r\n        }\r\n        // 标签一样 比对属性 和 儿子  标签一样直接复用\r\n        let el = vnode.el = oldVnode.el\r\n        updateProperties(vnode, oldVnode.data)\r\n\r\n        let oldChildren = oldVnode.children || []\r\n        let newChildren = vnode.children || []\r\n\r\n        // 儿子的比较\r\n        if(oldChildren.length && newChildren.length){    // 3、 老的有儿子，新的也有儿子s\r\n            updateChildren(oldChildren,newChildren,el)\r\n        }else if(oldChildren.length){  // 1、 老的有儿子，新的没有儿子\r\n            el.innerHTML = ''\r\n        }else{  // 2、 老的没儿子，新的有儿子\r\n            for(let i = 0 ; i < newChildren.length;i++){\r\n                let child = newChildren[i]\r\n                el.appendChild(createElm(child))\r\n            }\r\n        }\r\n     \r\n\r\n       \r\n       \r\n    }\r\n}\r\nfunction isSameVnode(oldVnode,newVnode){\r\n    return (oldVnode.tag == newVnode.tag )  && (oldVnode.key == newVnode.key)\r\n}\r\n\r\nfunction makeIndexByKey(children){\r\n    let map = {}\r\n    children.forEach((item,index)=>{\r\n        if(item.key){\r\n            map[item.key] = index\r\n        }\r\n    })\r\n    return map\r\n}\r\nfunction updateChildren(oldChildren,newChildren,parent){\r\n  \r\n    let oldStartIndex = 0\r\n    let oldStartVnode = oldChildren[0]\r\n    let oldEndIndex = oldChildren.length-1\r\n    let oldEndVnode = oldChildren[ oldChildren.length-1]\r\n\r\n    let newStartIndex = 0\r\n    let newStartVnode = newChildren[0]\r\n    let newEndIndex = newChildren.length-1\r\n    let newEndVnode = newChildren[ newChildren.length-1]\r\n    let map = makeIndexByKey(oldChildren) //把旧的key记录下来\r\n    while(oldStartIndex <=oldEndIndex &&  newStartIndex <= newEndIndex){\r\n        if(!oldStartVnode){\r\n            oldStartVnode = oldChildren[++oldStartIndex]\r\n        }else if(!oldEndVnode){\r\n            oldStartVnode = oldChildren[--oldEndIndex]\r\n        }else if(isSameVnode(oldStartVnode,newStartVnode)){  // 如果前面的节点没有改变\r\n            patch(oldStartVnode,newStartVnode)  //更新属性\r\n            oldStartVnode = oldChildren[++oldStartIndex]\r\n            newStartVnode = newChildren[++newStartIndex]\r\n        }else if(isSameVnode(oldEndVnode,newEndVnode)){ //如果后面的节点没有改变\r\n            patch(oldEndVnode,newEndVnode)\r\n            oldEndVnode = oldChildren[--oldEndIndex]\r\n            newEndVnode = newChildren[--newEndIndex]\r\n        }else if(isSameVnode(oldStartVnode,newEndVnode)){  //老的头和新的尾比较\r\n            patch(oldStartVnode,newEndVnode)\r\n            // 当前元素插到当前元素下一个的前面\r\n            parent.insertBefore(oldStartVnode.el,oldEndVnode.el.nextSibling)\r\n            oldStartVnode = oldChildren[++oldStartIndex]\r\n            newEndVnode = newChildren[--newEndIndex]\r\n        }else if(isSameVnode(oldEndVnode,newStartVnode)){ //老的尾和新的头比较\r\n            patch(oldEndVnode,newStartVnode)\r\n            parent.insertBefore(oldEndVnode.el,oldStartVnode.el)\r\n            oldEndVnode = oldChildren[--oldEndIndex]\r\n            newStartVnode = newChildren[++newStartIndex]\r\n        } else{  //都不相等需要暴力比对\r\n            // 如果这个新节点在老节点中没有 那就直接插入\r\n            let moveIndex = map[newStartVnode.key]\r\n            if(moveIndex==undefined){\r\n                parent.insertBefore(createElm(newStartVnode),oldStartVnode.el)\r\n            }else {\r\n                let moveVnode = oldChildren[moveIndex]\r\n                oldChildren[moveIndex] = null\r\n                parent.insertBefore(createElm(moveVnode),oldStartVnode.el) //insertBefore会将元素直接移动走，所以先将这个moveIndex的老元素中设置为null\r\n                patch(moveVnode,newStartVnode)\r\n            }\r\n            newStartVnode = newChildren[++newStartIndex]\r\n\r\n        }\r\n    }\r\n    if(oldStartIndex <= oldEndIndex){  //将剩余的老的节点删除\r\n        for(let i = oldStartIndex;i<= oldEndIndex;i++){\r\n            if(oldChildren[i]){\r\n                parent.removeChild(oldChildren[i].el)\r\n            }\r\n        } \r\n    }\r\n    if(newStartIndex <= newEndIndex){\r\n        for(let i = newStartIndex;i<= newEndIndex;i++){\r\n            parent.appendChild(createElm(newChildren[i]))\r\n            //新元素前面元素与旧元素不一致，那么newChildren 中存在newEndIndex+1，因为是从后往前比对的，\r\n            // 如果newChildren[newEndIndex + 1] == null 说明是从前往后比对的\r\n            let ele = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1] \r\n            parent.insertBefore( createElm(newChildren[i]),ele ) //insertBefore 当第二个值有的时候会把心的值当道第二个值得前面，如果第二个值是null  insertBefore 相当于appendChild\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction createElm(vnode) {\r\n    let { tag, children, key, data, text } = vnode\r\n\r\n    if (typeof tag === 'string') {\r\n        vnode.el = document.createElement(vnode.tag)\r\n        updateProperties(vnode)\r\n        children.forEach(child => {  //递归创建儿子节0点，将儿子节点当道父节点\r\n            return vnode.el.appendChild(createElm(child))\r\n        })\r\n    } else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction updateProperties(vnode,oldProps={}) {\r\n    let newProps = vnode.data || {},\r\n        el = vnode.el\r\n        // 如果新节点上没有 老节点有 移除老节点上的属性\r\n    for(let key in oldProps){\r\n        if(!newProps[key]){\r\n            el.removeAttribute(key)  //移除老节点属性\r\n        }\r\n    }\r\n\r\n    let newStyle = newProps.style\r\n    let oldStyle = oldProps.style\r\n    // 新的中没有 老的中有 则删除老的\r\n    for(let key in oldStyle){\r\n        if(!newStyle[key]){\r\n            el.style[key] = ''\r\n        }\r\n    }\r\n    // 新的有 那就正常加载老的上就行\r\n    for (let key in newProps) {\r\n        if (key === 'style') {\r\n            for (let stylekey in newProps.style) {\r\n                el.style[stylekey] = newProps.style[stylekey]\r\n            }\r\n        }else if(key === 'class'){\r\n            el.className = newProps[key]\r\n        }else{\r\n            el.setAttribute(key,newProps[key])\r\n        }\r\n    }\r\n}","import Watcher from './observe/watcher'\r\nimport { patch } from './vdom/patch'\r\nexport function lifecycleMixin(Vue) {\r\n    // 通过虚拟DOM创建真实的DOm\r\n    Vue.prototype._update = function (vnode) {\r\n        let vm = this\r\n        let prevVnode = vm._vnode\r\n        if (!prevVnode) {\r\n            // 需要用虚拟节点创建真实节点，替换原有的$el\r\n            vm.$el = patch(vm.$el, vnode)\r\n        } else {\r\n            vm.$el = patch(prevVnode, vnode)\r\n        }\r\n        vm._vnode = vnode\r\n    }\r\n}\r\n//初始化组件\r\nexport function mountComponent(vm, el) {\r\n    const options = vm.$options  //render\r\n    vm.$el = el //真实的dom\r\n    callHook(vm, 'beforeMount')\r\n    //_render 通过render方法，渲染出虚拟DOM\r\n    //无论渲染还是更新都会调用此方法\r\n    let updateComponent = () => {\r\n        //返回虚拟dom\r\n        vm._update(vm._render())\r\n    }\r\n    //渲染watcher\r\n    new Watcher(vm, updateComponent, () => {\r\n        callHook(vm, 'updated')\r\n    }, true)\r\n    callHook(vm, 'mounted')\r\n\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n    const handlers = vm.$options[hook]\r\n    if (handlers) {\r\n        handlers.forEach(hook => {\r\n            hook.call(vm)\r\n        })\r\n    }\r\n}","import { initState } from './state'\r\nimport { compileToFunctoin } from './compile/index.js'\r\nimport { mountComponent, callHook } from './lifecycle.js'\r\nimport { mergeOptions } from './utils/index'\r\nimport { nextTick } from './utils/next-tick'\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this\r\n        vm.$options = mergeOptions(vm.constructor.options, options)\r\n        callHook(vm, 'beforeCreate')\r\n        initState(vm)\r\n        callHook(vm, 'created')\r\n\r\n        let el = vm.$options.el\r\n        if (el) {\r\n            vm.$mount(el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this\r\n        el = document.querySelector(el)\r\n\r\n        let template = vm.$options.template\r\n        //如果el存在并且不存在template\r\n        if (!template && el) {\r\n            template = el.outerHTML\r\n        }\r\n        const render = compileToFunctoin(template)()\r\n        vm.$options.render = render\r\n        mountComponent(vm, el)\r\n    }\r\n    Vue.prototype.$nextTick = nextTick\r\n}","/**\r\n * \r\n * @param {*} tag 标签\r\n * @param {*} data 属性\r\n * @param  {...any} children \r\n */\r\nexport function createElement(tag, data = {}, ...children) {\r\n    let key = data.key\r\n    key ? delete data.key :''\r\n    return vnode(tag, data, key, children,undefined)\r\n}\r\n\r\nexport function createTextNode(text) {\r\n    return vnode(undefined, undefined, undefined, undefined,text)\r\n}\r\n\r\nfunction vnode(tag, data, key, children,text) {\r\n    return {\r\n        tag, \r\n        data, \r\n        key, \r\n        children,\r\n        text\r\n    }\r\n}","\r\nimport {createElement,createTextNode} from './vdom/create-element'\r\n\r\nexport function renderMixin(Vue) {\r\n\r\n    // _c 创建元素的虚拟节点\r\n    // _v 创建文本的虚拟节点\r\n    // _s JSON.stringify\r\n\r\n    Vue.prototype._c = function (){\r\n        return createElement(...arguments)\r\n    }\r\n    Vue.prototype._v = function (text){\r\n        return createTextNode(text)\r\n    }\r\n    Vue.prototype._s = function (val){\r\n        return val == null ? '' : (typeof val === 'object'?JSON.stringify(val):val)\r\n    }\r\n    Vue.prototype._render = function () {\r\n        let vm = this\r\n        let {render} = vm.$options\r\n        return  render.call(vm)\r\n    }\r\n}","import {mergeOptions} from '../utils/index.js'\r\n \r\nexport function initGlobalAPI (Vue){\r\n    // 整合了所有的全局api  \r\n    Vue.options = {}\r\n\r\n    Vue.mixin = function(mixin){\r\n        this.options = mergeOptions(this.options,mixin)\r\n    }\r\n    Vue.mixin({\r\n        beforeCreate(){\r\n        }\r\n    })\r\n    Vue.mixin({\r\n        beforeCreate(){\r\n        }\r\n    })\r\n\r\n}","import { initMixin } from './init'\r\nimport {renderMixin} from './render.js'\r\nimport { lifecycleMixin} from './lifecycle'\r\nimport {initGlobalAPI} from './initGlobalAPI/index.js'\r\nimport {stateMixin} from './state.js'\r\nfunction Vue (options){\r\n    this._init(options)\r\n}\r\nstateMixin(Vue)\r\ninitMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\ninitGlobalAPI(Vue)  //合并api\r\n\r\nexport default Vue"],"names":["isObject","data","proxy","vm","source","key","Object","defineProperty","get","set","val","API_HOOkS","starts","forEach","hook","mergeHook","parent","child","concat","mergeOptions","options","mergefile","hasOwnProperty","oldArrayMethods","Array","prototype","arrayMethods","create","methods","name","args","result","apply","inserted","ob","__ob__","slice","console","log","dep","notify","observeArray","id","Dep","subs","watcher","push","target","addDep","update","isWatcher","cb","stack","pushTarget","popTarget","pop","length","Observe","enumerable","configurable","value","isArray","__proto__","walk","keys","i","len","defineReactive","observe","childOb","depend","dependArray","newValue","current","callbacks","waiting","flushCallback","timerFunc","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","queue","has","flushSchedularQueue","run","queueWatcher","Watcher","exportFn","lazy","dirty","user","depsid","Set","deps","getter","split","reduce","p","c","add","addSub","redult","call","oldValue","initState","opts","$options","props","initData","computed","initComputed","initMethods","watch","initWatch","_data","watchers","_computedWatchers","userDep","defineCpmputed","sharedPropertyDefinition","createComputedGetter","evaluate","method","bind","handlers","handler","createWatcher","exprOrFn","$watch","stateMixin","Vue","immediate","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","root","currentParen","ELEMENT_TYPE","TEXT_TYPE","createAstElement","tagName","attrs","tag","type","children","start","ele","chars","text","replace","end","paeseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","parse","obj","defaultTagRE","compileToFunctoin","template","render","code","generate","renderFn","Function","el","geneProps","genChildren","map","gen","join","node","tokens","index","lastIndex","exec","JSON","stringify","str","item","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","remove","replaceChild","updateProperties","oldChildren","newChildren","updateChildren","innerHTML","appendChild","isSameVnode","newVnode","makeIndexByKey","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","moveIndex","undefined","moveVnode","removeChild","createElement","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","stylekey","className","setAttribute","lifecycleMixin","_update","prevVnode","_vnode","$el","mountComponent","callHook","updateComponent","_render","initMixin","_init","constructor","$mount","querySelector","outerHTML","$nextTick","renderMixin","_c","arguments","_v","_s","initGlobalAPI","mixin","beforeCreate"],"mappings":"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"}